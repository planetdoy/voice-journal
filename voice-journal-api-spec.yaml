openapi: 3.0.3

info:
  title: "Voice Journal API"
  version: "1.0.0"
  description: |
    Voice Journalì€ ì‚¬ìš©ìê°€ ë§¤ì¼ ë°¤ ë‚´ì¼ì˜ ê³„íšì„ ìŒì„±ìœ¼ë¡œ ë…¹ìŒí•˜ê³ ,
    ì•„ì¹¨ì— ìì‹ ì˜ ëª©ì†Œë¦¬ë¡œ ë“¤ìœ¼ë©° ë™ê¸°ë¶€ì—¬ë¥¼ ë°›ëŠ” ê°œì¸ ì„±ì¥ í”Œë«í¼ì…ë‹ˆë‹¤.
    
    ## ì£¼ìš” ê¸°ëŠ¥
    - ğŸ¤ ìŒì„± íŒŒì¼ ì—…ë¡œë“œ ë° OpenAI Whisperë¥¼ í†µí•œ í…ìŠ¤íŠ¸ ë³€í™˜
    - ğŸ“ ê³„íš(plan)ê³¼ íšŒê³ (reflection) ê¸°ë¡ ê´€ë¦¬
    - ğŸ¯ ëª©í‘œ ì„¤ì • ë° ë‹¬ì„±ë¥  ì¶”ì 
    - ğŸ“Š ì„±ì¥ íŒ¨í„´ ë¶„ì„ ë° ì¸ì‚¬ì´íŠ¸ ì œê³µ
    
    ## ì¸ì¦ ë°©ì‹
    ì´ APIëŠ” JWT ê¸°ë°˜ Bearer í† í° ì¸ì¦ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    ëª¨ë“  ë³´í˜¸ëœ ì—”ë“œí¬ì¸íŠ¸ëŠ” Authorization í—¤ë”ì— 'Bearer {token}' í˜•ì‹ìœ¼ë¡œ í† í°ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
    
    ## ì‘ë‹µ í˜•ì‹
    ëª¨ë“  ì‘ë‹µì€ JSON í˜•ì‹ì´ë©°, ì—ëŸ¬ ë°œìƒ ì‹œ ì¼ê´€ëœ ErrorResponse ìŠ¤í‚¤ë§ˆë¥¼ ë”°ë¦…ë‹ˆë‹¤.
    
    ## íŒŒì¼ ì—…ë¡œë“œ
    ìŒì„± íŒŒì¼ ì—…ë¡œë“œëŠ” S3 Pre-signed URLì„ í†µí•´ ì´ë£¨ì–´ì§€ë©°, 
    ì§€ì›ë˜ëŠ” í˜•ì‹ì€ MP3, WAV, M4A, OGG (ìµœëŒ€ 25MB)ì…ë‹ˆë‹¤.
  termsOfService: "https://voicejournal.com/terms"
  contact:
    name: "Voice Journal ì§€ì›íŒ€"
    url: "https://voicejournal.com/support"
    email: "support@voicejournal.com"
  license:
    name: "MIT"
    url: "https://opensource.org/licenses/MIT"

servers:
  - url: "https://api.voicejournal.com"
    description: "Production server"
  - url: "https://staging-api.voicejournal.com"
    description: "Staging server for testing"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "JWT í† í°ì„ Authorization í—¤ë”ì— 'Bearer {token}' í˜•ì‹ìœ¼ë¡œ í¬í•¨í•´ì£¼ì„¸ìš”."

  schemas:
    ErrorResponse:
      type: object
      description: "í‘œì¤€ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹"
      properties:
        code:
          type: integer
          description: "HTTP ìƒíƒœ ì½”ë“œ"
          example: 400
        message:
          type: string
          description: "ì‚¬ìš©ìì—ê²Œ í‘œì‹œí•  ì—ëŸ¬ ë©”ì‹œì§€"
          example: "ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤."
        details:
          type: string
          description: "ê°œë°œìë¥¼ ìœ„í•œ ìƒì„¸ ì—ëŸ¬ ì •ë³´ (ì„ íƒì )"
          example: "filename íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."
        timestamp:
          type: string
          format: date-time
          description: "ì—ëŸ¬ ë°œìƒ ì‹œê°„ (ISO 8601)"
          example: "2024-01-15T10:30:00Z"
        requestId:
          type: string
          description: "ìš”ì²­ ì¶”ì ì„ ìœ„í•œ ê³ ìœ  ID (ì„ íƒì )"
          example: "req_abc123def456"
      required: [code, message, timestamp]

    User:
      type: object
      description: "ì‚¬ìš©ì ì •ë³´"
      properties:
        id:
          type: string
          description: "ì‚¬ìš©ì ê³ ìœ  ì‹ë³„ì"
          example: "user_123456789"
        name:
          type: string
          minLength: 2
          maxLength: 50
          description: "ì‚¬ìš©ì ì´ë¦„"
          example: "ê¹€ì„±ì¥"
        email:
          type: string
          format: email
          description: "ì‚¬ìš©ì ì´ë©”ì¼ ì£¼ì†Œ"
          example: "growth@example.com"
        avatar:
          type: string
          format: uri
          description: "í”„ë¡œí•„ ì´ë¯¸ì§€ URL (ì„ íƒì )"
          example: "https://cdn.voicejournal.com/avatars/user123.jpg"
        joinDate:
          type: string
          format: date
          description: "ê°€ì…ì¼ (YYYY-MM-DD)"
          example: "2024-01-15"
        lastLogin:
          type: string
          format: date-time
          description: "ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„"
          example: "2024-01-15T10:30:00Z"
        emailVerified:
          type: boolean
          description: "ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ ì—¬ë¶€"
          example: true
        plan:
          type: string
          enum: [free, premium]
          description: "êµ¬ë… í”Œëœ"
          example: "free"
        createdAt:
          type: string
          format: date-time
          description: "ê³„ì • ìƒì„± ì‹œê°„"
          example: "2024-01-15T09:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: "ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„"
          example: "2024-01-15T10:30:00Z"
      required: [id, name, email, joinDate, emailVerified, plan, createdAt]

    VoiceEntry:
      type: object
      description: "ìŒì„± ê¸°ë¡ ì •ë³´"
      properties:
        id:
          type: string
          description: "ê¸°ë¡ ê³ ìœ  ì‹ë³„ì"
          example: "entry_789012345"
        userId:
          type: string
          description: "ì†Œìœ ì ì‚¬ìš©ì ID"
          example: "user_123456789"
        type:
          type: string
          enum: [plan, reflection]
          description: "ê¸°ë¡ íƒ€ì… - plan: ê³„íš, reflection: íšŒê³ "
          example: "plan"
        date:
          type: string
          format: date
          description: "ê¸°ë¡ ë‚ ì§œ (YYYY-MM-DD)"
          example: "2024-01-15"
        time:
          type: string
          pattern: "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
          description: "ê¸°ë¡ ì‹œê°„ (HH:MM, 24ì‹œê°„ í˜•ì‹)"
          example: "21:30"
        duration:
          type: string
          pattern: "^[0-9]+:[0-5][0-9]$"
          description: "ìŒì„± ê¸¸ì´ (MM:SS)"
          example: "2:45"
        text:
          type: string
          description: "AIë¡œ ë³€í™˜ëœ í…ìŠ¤íŠ¸ ë‚´ìš©"
          example: "ë‚´ì¼ì€ ì•„ì¹¨ 7ì‹œì— ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ 30ë¶„ í•˜ê³ , ì˜¤ì „ì—ëŠ” í”„ë¡œì íŠ¸ ê¸°íšì„œë¥¼ ì™„ì„±í•˜ê² ìŠµë‹ˆë‹¤. ì˜¤í›„ì—ëŠ” ë…ì„œ ì‹œê°„ì„ ê°€ì§€ê³ , ì €ë…ì—ëŠ” ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ëŒì•„ë³´ëŠ” ì‹œê°„ì„ ê°–ê² ìŠµë‹ˆë‹¤."
        audioUrl:
          type: string
          format: uri
          description: "ìŒì„± íŒŒì¼ ì ‘ê·¼ URL"
          example: "https://cdn.voicejournal.com/audio/user123/entry789012.mp3"
        fileName:
          type: string
          description: "ì—…ë¡œë“œëœ ì›ë³¸ íŒŒì¼ëª…"
          example: "morning_plan.mp3"
        fileSize:
          type: string
          description: "íŒŒì¼ í¬ê¸° (ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•ì‹)"
          example: "2.1MB"
        fileSizeBytes:
          type: integer
          description: "íŒŒì¼ í¬ê¸° (ë°”ì´íŠ¸)"
          example: 2097152
        language:
          type: string
          description: "AIê°€ ê°ì§€í•œ ì–¸ì–´ ì½”ë“œ"
          example: "ko"
        confidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: "AI ë³€í™˜ ì‹ ë¢°ë„ (0-1)"
          example: 0.95
        summary:
          type: string
          description: "AIê°€ ìƒì„±í•œ ë‚´ìš© ìš”ì•½ (ì„ íƒì )"
          example: "ë‚´ì¼ ì•„ì¹¨ ìš´ë™ê³¼ í”„ë¡œì íŠ¸ ê¸°íšì„œ ì™„ì„±ì„ ëª©í‘œë¡œ ì„¤ì •"
        keywords:
          type: array
          items:
            type: string
          description: "AIê°€ ì¶”ì¶œí•œ í‚¤ì›Œë“œ ëª©ë¡"
          example: ["ìš´ë™", "í”„ë¡œì íŠ¸", "ê¸°íšì„œ", "ë…ì„œ"]
        completed:
          type: boolean
          description: "ì™„ë£Œ ì—¬ë¶€ (ê³„íšì˜ ê²½ìš°)"
          example: false
        mood:
          type: string
          enum: [positive, neutral, negative]
          description: "AIê°€ ë¶„ì„í•œ ê°ì • ìƒíƒœ (ì„ íƒì )"
          example: "positive"
        createdAt:
          type: string
          format: date-time
          description: "ìƒì„± ì‹œê°„"
          example: "2024-01-15T21:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: "ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„"
          example: "2024-01-15T21:30:00Z"
      required: [id, userId, type, date, time, duration, text, audioUrl, createdAt]

    DailyGoal:
      type: object
      description: "ì¼ì¼ ëª©í‘œ ì •ë³´"
      properties:
        id:
          type: string
          description: "ëª©í‘œ ê³ ìœ  ì‹ë³„ì"
          example: "goal_345678901"
        userId:
          type: string
          description: "ì†Œìœ ì ì‚¬ìš©ì ID"
          example: "user_123456789"
        text:
          type: string
          minLength: 1
          maxLength: 200
          description: "ëª©í‘œ ë‚´ìš©"
          example: "ì•„ì¹¨ ìš´ë™ 30ë¶„"
        completed:
          type: boolean
          description: "ì™„ë£Œ ì—¬ë¶€"
          example: true
        priority:
          type: string
          enum: [low, medium, high]
          description: "ìš°ì„ ìˆœìœ„"
          example: "high"
        category:
          type: string
          description: "ëª©í‘œ ì¹´í…Œê³ ë¦¬ (ì„ íƒì )"
          example: "ê±´ê°•"
        estimatedMinutes:
          type: integer
          minimum: 1
          description: "ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„, ì„ íƒì )"
          example: 30
        createdAt:
          type: string
          format: date-time
          description: "ìƒì„± ì‹œê°„"
          example: "2024-01-15T07:00:00Z"
        completedAt:
          type: string
          format: date-time
          description: "ì™„ë£Œ ì‹œê°„ (ì™„ë£Œëœ ê²½ìš°)"
          example: "2024-01-15T07:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: "ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„"
          example: "2024-01-15T07:30:00Z"
      required: [id, userId, text, completed, createdAt]

    TranscriptionRequest:
      type: object
      description: "ìŒì„± ë³€í™˜ ìš”ì²­"
      properties:
        audioUrl:
          type: string
          format: uri
          description: "ë³€í™˜í•  ìŒì„± íŒŒì¼ì˜ URL"
          example: "https://cdn.voicejournal.com/temp/audio123.mp3"
        language:
          type: string
          description: "ì–¸ì–´ ì½”ë“œ (ì„ íƒì , ê¸°ë³¸ê°’: ko)"
          example: "ko"
        prompt:
          type: string
          description: "ë³€í™˜ ì •í™•ë„ í–¥ìƒì„ ìœ„í•œ íŒíŠ¸ í…ìŠ¤íŠ¸ (ì„ íƒì )"
          example: "ì´ê²ƒì€ ë‚´ì¼ ê³„íšì— ëŒ€í•œ ìŒì„± ë©”ëª¨ì…ë‹ˆë‹¤."
      required: [audioUrl]

    TranscriptionResponse:
      type: object
      description: "ìŒì„± ë³€í™˜ ê²°ê³¼"
      properties:
        success:
          type: boolean
          description: "ë³€í™˜ ì„±ê³µ ì—¬ë¶€"
          example: true
        text:
          type: string
          description: "ë³€í™˜ëœ í…ìŠ¤íŠ¸"
          example: "ë‚´ì¼ì€ ì•„ì¹¨ 7ì‹œì— ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ í•˜ê² ìŠµë‹ˆë‹¤."
        language:
          type: string
          description: "ê°ì§€ëœ ì–¸ì–´ ì½”ë“œ"
          example: "ko"
        duration:
          type: number
          format: float
          description: "ìŒì„± ê¸¸ì´ (ì´ˆ)"
          example: 165.5
        confidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: "ì „ì²´ ë³€í™˜ ì‹ ë¢°ë„"
          example: 0.95
        segments:
          type: array
          description: "ì„¸ê·¸ë¨¼íŠ¸ë³„ ìƒì„¸ ì •ë³´ (ì„ íƒì )"
          items:
            type: object
            properties:
              start:
                type: number
                format: float
                description: "ì‹œì‘ ì‹œê°„ (ì´ˆ)"
                example: 0.0
              end:
                type: number
                format: float
                description: "ì¢…ë£Œ ì‹œê°„ (ì´ˆ)"
                example: 5.2
              text:
                type: string
                description: "ì„¸ê·¸ë¨¼íŠ¸ í…ìŠ¤íŠ¸"
                example: "ë‚´ì¼ì€ ì•„ì¹¨ 7ì‹œì—"
              confidence:
                type: number
                format: float
                description: "ì„¸ê·¸ë¨¼íŠ¸ ì‹ ë¢°ë„"
                example: 0.98
        processingTime:
          type: number
          format: float
          description: "ì²˜ë¦¬ ì‹œê°„ (ì´ˆ)"
          example: 3.2
      required: [success, text]

    AuthTokens:
      type: object
      description: "ì¸ì¦ í† í° ì •ë³´"
      properties:
        accessToken:
          type: string
          description: "ì•¡ì„¸ìŠ¤ í† í° (API í˜¸ì¶œìš©, 1ì‹œê°„ ìœ íš¨)"
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyXzEyMzQ1NiIsImlhdCI6MTcwNTMxNDAwMCwiZXhwIjoxNzA1MzE3NjAwfQ.signature"
        refreshToken:
          type: string
          description: "ë¦¬í”„ë ˆì‹œ í† í° (í† í° ê°±ì‹ ìš©, 30ì¼ ìœ íš¨)"
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyXzEyMzQ1NiIsInR5cCI6InJlZnJlc2giLCJpYXQiOjE3MDUzMTQwMDB9.signature"
        expiresIn:
          type: integer
          description: "ì•¡ì„¸ìŠ¤ í† í° ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì‹œê°„ (ì´ˆ)"
          example: 3600
        tokenType:
          type: string
          description: "í† í° íƒ€ì…"
          example: "Bearer"
        scope:
          type: string
          description: "í† í° ê¶Œí•œ ë²”ìœ„"
          example: "read write"
      required: [accessToken, refreshToken, expiresIn, tokenType]

    PaginationInfo:
      type: object
      description: "í˜ì´ì§€ë„¤ì´ì…˜ ì •ë³´"
      properties:
        page:
          type: integer
          minimum: 1
          description: "í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸"
          example: 1
        size:
          type: integer
          minimum: 1
          maximum: 100
          description: "í˜ì´ì§€ë‹¹ í•­ëª© ìˆ˜"
          example: 10
        total:
          type: integer
          minimum: 0
          description: "ì „ì²´ í•­ëª© ìˆ˜"
          example: 45
        totalPages:
          type: integer
          minimum: 0
          description: "ì „ì²´ í˜ì´ì§€ ìˆ˜"
          example: 5
        hasNext:
          type: boolean
          description: "ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€"
          example: true
        hasPrev:
          type: boolean
          description: "ì´ì „ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€"
          example: false
        nextPage:
          type: integer
          description: "ë‹¤ìŒ í˜ì´ì§€ ë²ˆí˜¸ (ìˆëŠ” ê²½ìš°)"
          example: 2
        prevPage:
          type: integer
          description: "ì´ì „ í˜ì´ì§€ ë²ˆí˜¸ (ìˆëŠ” ê²½ìš°)"
          example: null
      required: [page, size, total, totalPages, hasNext, hasPrev]

    PaginatedVoiceEntries:
      type: object
      description: "í˜ì´ì§€ë„¤ì´ì…˜ëœ ìŒì„± ê¸°ë¡ ëª©ë¡"
      properties:
        data:
          type: array
          description: "ìŒì„± ê¸°ë¡ ë°°ì—´"
          items:
            $ref: '#/components/schemas/VoiceEntry'
        pagination:
          $ref: '#/components/schemas/PaginationInfo'
        filters:
          type: object
          description: "ì ìš©ëœ í•„í„° ì •ë³´"
          properties:
            type:
              type: string
              enum: [plan, reflection]
              example: "plan"
            startDate:
              type: string
              format: date
              example: "2024-01-01"
            endDate:
              type: string
              format: date
              example: "2024-01-31"
            sort:
              type: string
              enum: [newest, oldest]
              example: "newest"
      required: [data, pagination]

    PresignedUrlResponse:
      type: object
      description: "S3 Pre-signed URL ì‘ë‹µ"
      properties:
        uploadUrl:
          type: string
          format: uri
          description: "íŒŒì¼ ì—…ë¡œë“œìš© pre-signed URL"
          example: "https://s3.amazonaws.com/voice-journal-bucket/audio/user123/20240115_213000.mp3?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=..."
        fileUrl:
          type: string
          format: uri
          description: "ì—…ë¡œë“œ ì™„ë£Œ í›„ íŒŒì¼ ì ‘ê·¼ URL"
          example: "https://cdn.voicejournal.com/audio/user123/20240115_213000.mp3"
        fileKey:
          type: string
          description: "S3 ê°ì²´ í‚¤"
          example: "audio/user123/20240115_213000.mp3"
        expiresIn:
          type: integer
          description: "URL ë§Œë£Œê¹Œì§€ ë‚¨ì€ ì‹œê°„ (ì´ˆ)"
          example: 3600
        maxFileSize:
          type: integer
          description: "ìµœëŒ€ ì—…ë¡œë“œ ê°€ëŠ¥ íŒŒì¼ í¬ê¸° (ë°”ì´íŠ¸)"
          example: 26214400
      required: [uploadUrl, fileUrl, fileKey, expiresIn]

paths:
  # Authentication
  /api/v1/auth/signup:
    post:
      tags: ["Authentication"]
      summary: "íšŒì›ê°€ì…"
      description: |
        ìƒˆë¡œìš´ ì‚¬ìš©ì ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.
        
        - ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
        - ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ê²€ì¦ (ìµœì†Œ 8ì, ì˜ë¬¸+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì ê¶Œì¥)
        - ì´ë©”ì¼ ì¸ì¦ ë©”ì¼ ë°œì†¡
      operationId: "signup"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 50
                  description: "ì‚¬ìš©ì ì´ë¦„"
                  example: "ê¹€ì„±ì¥"
                email:
                  type: string
                  format: email
                  description: "ì´ë©”ì¼ ì£¼ì†Œ"
                  example: "growth@example.com"
                password:
                  type: string
                  minLength: 8
                  description: "ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 8ì)"
                  example: "securePassword123!"
                agreeToTerms:
                  type: boolean
                  description: "ì´ìš©ì•½ê´€ ë™ì˜"
                  example: true
              required: [name, email, password, agreeToTerms]
      responses:
        '201':
          description: "íšŒì›ê°€ì… ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë©”ì¼ ì¸ì¦ì„ ì§„í–‰í•´ì£¼ì„¸ìš”."
                  user:
                    $ref: '#/components/schemas/User'
                  emailSent:
                    type: boolean
                    description: "ì¸ì¦ ì´ë©”ì¼ ë°œì†¡ ì—¬ë¶€"
                    example: true
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨, ì´ë©”ì¼ ì¤‘ë³µ ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                validation_error:
                  summary: "ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨"
                  value:
                    code: 400
                    message: "ì…ë ¥ ì •ë³´ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."
                    details: "ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
                email_exists:
                  summary: "ì´ë©”ì¼ ì¤‘ë³µ"
                  value:
                    code: 400
                    message: "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼ (íšŒì›ê°€ì… ì‹œë„ ì œí•œ)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/auth/login:
    post:
      tags: ["Authentication"]
      summary: "ë¡œê·¸ì¸"
      description: |
        ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•˜ì—¬ JWT í† í°ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
        
        - ì´ë©”ì¼ ì¸ì¦ ì™„ë£Œ í™•ì¸
        - ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜ ì œí•œ (5íšŒ ì‹¤íŒ¨ ì‹œ 15ë¶„ ì ê¸ˆ)
        - ì•¡ì„¸ìŠ¤ í† í° (1ì‹œê°„) + ë¦¬í”„ë ˆì‹œ í† í° (30ì¼) ë°œê¸‰
      operationId: "login"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: "ì´ë©”ì¼ ì£¼ì†Œ"
                  example: "growth@example.com"
                password:
                  type: string
                  description: "ë¹„ë°€ë²ˆí˜¸"
                  example: "securePassword123!"
                rememberMe:
                  type: boolean
                  description: "ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€ (ì„ íƒì )"
                  example: false
              required: [email, password]
      responses:
        '200':
          description: "ë¡œê·¸ì¸ ì„±ê³µ"
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/AuthTokens'
                  - type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨ (ì˜ëª»ëœ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_credentials:
                  summary: "ì˜ëª»ëœ ì¸ì¦ ì •ë³´"
                  value:
                    code: 401
                    message: "ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
                email_not_verified:
                  summary: "ì´ë©”ì¼ ë¯¸ì¸ì¦"
                  value:
                    code: 401
                    message: "ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”."
                    timestamp: "2024-01-15T10:30:00Z"
        '429':
          description: "ë¡œê·¸ì¸ ì‹œë„ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/auth/refresh:
    post:
      tags: ["Authentication"]
      summary: "í† í° ê°±ì‹ "
      description: |
        ë¦¬í”„ë ˆì‹œ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
        
        - ë¦¬í”„ë ˆì‹œ í† í° ìœ íš¨ì„± ê²€ì¦
        - ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰ (1ì‹œê°„ ìœ íš¨)
        - í•„ìš”ì‹œ ìƒˆë¡œìš´ ë¦¬í”„ë ˆì‹œ í† í°ë„ ë°œê¸‰
      operationId: "refreshToken"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refreshToken:
                  type: string
                  description: "ë¦¬í”„ë ˆì‹œ í† í°"
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              required: [refreshToken]
      responses:
        '200':
          description: "í† í° ê°±ì‹  ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                    description: "ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í°"
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  refreshToken:
                    type: string
                    description: "ìƒˆë¡œìš´ ë¦¬í”„ë ˆì‹œ í† í° (ì„ íƒì )"
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  expiresIn:
                    type: integer
                    description: "ì•¡ì„¸ìŠ¤ í† í° ë§Œë£Œ ì‹œê°„ (ì´ˆ)"
                    example: 3600
                  tokenType:
                    type: string
                    example: "Bearer"
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ìœ íš¨í•˜ì§€ ì•Šì€ ë¦¬í”„ë ˆì‹œ í† í°"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # File Upload
  /api/v1/upload/presigned-url:
    get:
      tags: ["File Upload"]
      summary: "S3 Pre-signed URL ë°œê¸‰"
      description: |
        ìŒì„± íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ S3 pre-signed URLì„ ë°œê¸‰í•©ë‹ˆë‹¤.
        
        - ì§€ì› í˜•ì‹: MP3, WAV, M4A, OGG, WEBM
        - ìµœëŒ€ íŒŒì¼ í¬ê¸°: 25MB (OpenAI Whisper ì œí•œ)
        - URL ìœ íš¨ ì‹œê°„: 1ì‹œê°„
      operationId: "getPresignedUrl"
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: filename
          required: true
          schema:
            type: string
            pattern: "^[a-zA-Z0-9._-]+\\.(mp3|wav|m4a|ogg|webm)$"
            example: "morning_plan.mp3"
          description: "ì—…ë¡œë“œí•  íŒŒì¼ëª… (í™•ì¥ì í¬í•¨)"
        - in: query
          name: contentType
          required: true
          schema:
            type: string
            enum: ["audio/mpeg", "audio/wav", "audio/m4a", "audio/ogg", "audio/webm"]
            example: "audio/mpeg"
          description: "íŒŒì¼ MIME íƒ€ì…"
        - in: query
          name: fileSize
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 26214400
            example: 2097152
          description: "íŒŒì¼ í¬ê¸° (ë°”ì´íŠ¸, ì„ íƒì )"
      responses:
        '200':
          description: "Pre-signed URL ë°œê¸‰ ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PresignedUrlResponse'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹, í¬ê¸° ì´ˆê³¼ ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["File Upload"]
      summary: "CORS preflight for presigned URL"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "presignedUrlOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"
            Access-Control-Max-Age:
              schema:
                type: integer
                example: 86400

  # Voice Processing
  /api/v1/transcribe:
    post:
      tags: ["Voice Processing"]
      summary: "ìŒì„± í…ìŠ¤íŠ¸ ë³€í™˜"
      description: |
        OpenAI Whisperë¥¼ ì‚¬ìš©í•˜ì—¬ ìŒì„± íŒŒì¼ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
        
        - ì§€ì› ì–¸ì–´: í•œêµ­ì–´, ì˜ì–´ ë“± 99ê°œ ì–¸ì–´
        - ìë™ ì–¸ì–´ ê°ì§€ ë˜ëŠ” ìˆ˜ë™ ì§€ì • ê°€ëŠ¥
        - ì„¸ê·¸ë¨¼íŠ¸ë³„ íƒ€ì„ìŠ¤íƒ¬í”„ ì œê³µ
        - ë³€í™˜ ì‹ ë¢°ë„ ì ìˆ˜ í¬í•¨
      operationId: "transcribeAudio"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TranscriptionRequest'
      responses:
        '200':
          description: "ë³€í™˜ ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TranscriptionResponse'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (íŒŒì¼ í˜•ì‹, í¬ê¸°, URL ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalid_file:
                  summary: "ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼"
                  value:
                    code: 400
                    message: "ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤."
                    details: "MP3, WAV, M4A, OGG íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
                file_too_large:
                  summary: "íŒŒì¼ í¬ê¸° ì´ˆê³¼"
                  value:
                    code: 400
                    message: "íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤."
                    details: "ìµœëŒ€ 25MBê¹Œì§€ ì§€ì›ë©ë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '402':
          description: "í• ë‹¹ëŸ‰ ë¶€ì¡± (OpenAI API í¬ë ˆë”§ ë¶€ì¡±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["Voice Processing"]
      summary: "CORS preflight for transcription"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "transcribeOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "POST, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

  # Voice Entries
  /api/v1/voice-entries:
    post:
      tags: ["Voice Entries"]
      summary: "ìŒì„± ê¸°ë¡ ìƒì„±"
      description: |
        ìƒˆë¡œìš´ ìŒì„± ê¸°ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.
        
        - ê³„íš(plan) ë˜ëŠ” íšŒê³ (reflection) íƒ€ì… ì§€ì •
        - AI ë³€í™˜ëœ í…ìŠ¤íŠ¸ì™€ ì›ë³¸ ìŒì„± íŒŒì¼ ì—°ê²°
        - ìë™ í‚¤ì›Œë“œ ì¶”ì¶œ ë° ê°ì • ë¶„ì„
        - ë¬´ë£Œ í”Œëœ ì‚¬ìš©ëŸ‰ ì œí•œ ì ìš©
      operationId: "createVoiceEntry"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  enum: [plan, reflection]
                  description: "ê¸°ë¡ íƒ€ì…"
                  example: "plan"
                text:
                  type: string
                  minLength: 1
                  description: "ë³€í™˜ëœ í…ìŠ¤íŠ¸"
                  example: "ë‚´ì¼ì€ ì•„ì¹¨ 7ì‹œì— ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ 30ë¶„ í•˜ê² ìŠµë‹ˆë‹¤."
                audioUrl:
                  type: string
                  format: uri
                  description: "ìŒì„± íŒŒì¼ URL"
                  example: "https://cdn.voicejournal.com/audio/user123/entry789.mp3"
                fileName:
                  type: string
                  description: "ì›ë³¸ íŒŒì¼ëª…"
                  example: "morning_plan.mp3"
                fileSize:
                  type: string
                  description: "íŒŒì¼ í¬ê¸°"
                  example: "2.1MB"
                fileSizeBytes:
                  type: integer
                  description: "íŒŒì¼ í¬ê¸° (ë°”ì´íŠ¸)"
                  example: 2097152
                duration:
                  type: string
                  description: "ìŒì„± ê¸¸ì´"
                  example: "2:45"
                language:
                  type: string
                  description: "ì–¸ì–´ ì½”ë“œ"
                  example: "ko"
                confidence:
                  type: number
                  format: float
                  description: "ë³€í™˜ ì‹ ë¢°ë„"
                  example: 0.95
                date:
                  type: string
                  format: date
                  description: "ê¸°ë¡ ë‚ ì§œ (ì„ íƒì , ê¸°ë³¸ê°’: ì˜¤ëŠ˜)"
                  example: "2024-01-15"
              required: [type, text, audioUrl]
      responses:
        '201':
          description: "ê¸°ë¡ ìƒì„± ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceEntry'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '402':
          description: "ë¬´ë£Œ í”Œëœ ì‚¬ìš©ëŸ‰ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    get:
      tags: ["Voice Entries"]
      summary: "ìŒì„± ê¸°ë¡ ëª©ë¡ ì¡°íšŒ"
      description: |
        ì‚¬ìš©ìì˜ ìŒì„± ê¸°ë¡ ëª©ë¡ì„ í˜ì´ì§€ë„¤ì´ì…˜ìœ¼ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤.
        
        - íƒ€ì…ë³„ í•„í„°ë§ (ê³„íš/íšŒê³ )
        - ë‚ ì§œ ë²”ìœ„ í•„í„°ë§
        - ì •ë ¬ ì˜µì…˜ (ìµœì‹ ìˆœ/ì˜¤ë˜ëœìˆœ)
        - ê²€ìƒ‰ ê¸°ëŠ¥ (í…ìŠ¤íŠ¸ ë‚´ìš© ê¸°ë°˜)
      operationId: "getVoiceEntries"
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: "í˜ì´ì§€ ë²ˆí˜¸"
          example: 1
        - in: query
          name: size
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: "í˜ì´ì§€ í¬ê¸°"
          example: 10
        - in: query
          name: type
          schema:
            type: string
            enum: [plan, reflection]
          description: "ê¸°ë¡ íƒ€ì… í•„í„°"
          example: "plan"
        - in: query
          name: startDate
          schema:
            type: string
            format: date
          description: "ì‹œì‘ ë‚ ì§œ í•„í„° (YYYY-MM-DD)"
          example: "2024-01-01"
        - in: query
          name: endDate
          schema:
            type: string
            format: date
          description: "ì¢…ë£Œ ë‚ ì§œ í•„í„° (YYYY-MM-DD)"
          example: "2024-01-31"
        - in: query
          name: sort
          schema:
            type: string
            enum: [newest, oldest]
            default: newest
          description: "ì •ë ¬ ìˆœì„œ"
          example: "newest"
        - in: query
          name: search
          schema:
            type: string
            maxLength: 100
          description: "í…ìŠ¤íŠ¸ ë‚´ìš© ê²€ìƒ‰"
          example: "ìš´ë™"
        - in: query
          name: completed
          schema:
            type: boolean
          description: "ì™„ë£Œ ì—¬ë¶€ í•„í„° (ê³„íšì˜ ê²½ìš°)"
          example: false
      responses:
        '200':
          description: "ëª©ë¡ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedVoiceEntries'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ì˜ëª»ëœ ë‚ ì§œ í˜•ì‹ ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["Voice Entries"]
      summary: "CORS preflight for voice entries"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "voiceEntriesOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, POST, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

  /api/v1/voice-entries/{entryId}:
    get:
      tags: ["Voice Entries"]
      summary: "ìŒì„± ê¸°ë¡ ìƒì„¸ ì¡°íšŒ"
      description: |
        íŠ¹ì • ìŒì„± ê¸°ë¡ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        
        - ì „ì²´ í…ìŠ¤íŠ¸ ë‚´ìš©
        - ìŒì„± íŒŒì¼ ì •ë³´
        - AI ë¶„ì„ ê²°ê³¼ (í‚¤ì›Œë“œ, ê°ì • ë“±)
        - ì„¸ê·¸ë¨¼íŠ¸ë³„ íƒ€ì„ìŠ¤íƒ¬í”„ (ìˆëŠ” ê²½ìš°)
      operationId: "getVoiceEntry"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: entryId
          required: true
          schema:
            type: string
            pattern: "^entry_[a-zA-Z0-9]+$"
          description: "ê¸°ë¡ ê³ ìœ  ID"
          example: "entry_789012345"
      responses:
        '200':
          description: "ìƒì„¸ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceEntry'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ì˜ëª»ëœ ID í˜•ì‹)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: "ê¸°ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags: ["Voice Entries"]
      summary: "ìŒì„± ê¸°ë¡ ìˆ˜ì •"
      description: |
        ê¸°ì¡´ ìŒì„± ê¸°ë¡ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
        
        - í…ìŠ¤íŠ¸ ë‚´ìš© ìˆ˜ì • ê°€ëŠ¥
        - ì™„ë£Œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥
        - ìŒì„± íŒŒì¼ì€ ìˆ˜ì • ë¶ˆê°€
        - ìˆ˜ì • ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸
      operationId: "updateVoiceEntry"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: entryId
          required: true
          schema:
            type: string
            pattern: "^entry_[a-zA-Z0-9]+$"
          description: "ê¸°ë¡ ê³ ìœ  ID"
          example: "entry_789012345"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                  minLength: 1
                  description: "ìˆ˜ì •ëœ í…ìŠ¤íŠ¸"
                  example: "ë‚´ì¼ì€ ì•„ì¹¨ 7ì‹œì— ì¼ì–´ë‚˜ì„œ ìš´ë™ì„ 1ì‹œê°„ í•˜ê² ìŠµë‹ˆë‹¤."
                completed:
                  type: boolean
                  description: "ì™„ë£Œ ì—¬ë¶€"
                  example: true
                summary:
                  type: string
                  description: "ì‚¬ìš©ì ì •ì˜ ìš”ì•½"
                  example: "ë‚´ì¼ ì•„ì¹¨ ìš´ë™ ê³„íš"
              minProperties: 1
      responses:
        '200':
          description: "ìˆ˜ì • ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VoiceEntry'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: "ê¸°ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags: ["Voice Entries"]
      summary: "ìŒì„± ê¸°ë¡ ì‚­ì œ"
      description: |
        íŠ¹ì • ìŒì„± ê¸°ë¡ì„ ì‚­ì œí•©ë‹ˆë‹¤.
        
        - ê¸°ë¡ê³¼ ì—°ê²°ëœ ìŒì„± íŒŒì¼ë„ í•¨ê»˜ ì‚­ì œ
        - ì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬ ë¶ˆê°€
        - ì†Œí”„íŠ¸ ì‚­ì œ (30ì¼ í›„ ì™„ì „ ì‚­ì œ)
      operationId: "deleteVoiceEntry"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: entryId
          required: true
          schema:
            type: string
            pattern: "^entry_[a-zA-Z0-9]+$"
          description: "ê¸°ë¡ ê³ ìœ  ID"
          example: "entry_789012345"
      responses:
        '204':
          description: "ì‚­ì œ ì„±ê³µ"
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: "ê¸°ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["Voice Entries"]
      summary: "CORS preflight for voice entry operations"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "voiceEntryOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, PUT, DELETE, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

  # Goals
  /api/v1/goals:
    post:
      tags: ["Goals"]
      summary: "ëª©í‘œ ìƒì„±"
      description: |
        ìƒˆë¡œìš´ ì¼ì¼ ëª©í‘œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        
        - í•˜ë£¨ ìµœëŒ€ 20ê°œ ëª©í‘œ ì œí•œ
        - ìš°ì„ ìˆœìœ„ ì„¤ì • ê°€ëŠ¥
        - ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ê°€ëŠ¥
        - ì˜ˆìƒ ì†Œìš” ì‹œê°„ ì„¤ì • ê°€ëŠ¥
      operationId: "createGoal"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                  minLength: 1
                  maxLength: 200
                  description: "ëª©í‘œ ë‚´ìš©"
                  example: "ì•„ì¹¨ ìš´ë™ 30ë¶„"
                priority:
                  type: string
                  enum: [low, medium, high]
                  description: "ìš°ì„ ìˆœìœ„ (ê¸°ë³¸ê°’: medium)"
                  example: "high"
                category:
                  type: string
                  maxLength: 50
                  description: "ëª©í‘œ ì¹´í…Œê³ ë¦¬ (ì„ íƒì )"
                  example: "ê±´ê°•"
                estimatedMinutes:
                  type: integer
                  minimum: 1
                  maximum: 1440
                  description: "ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„, ì„ íƒì )"
                  example: 30
                date:
                  type: string
                  format: date
                  description: "ëª©í‘œ ë‚ ì§œ (ê¸°ë³¸ê°’: ì˜¤ëŠ˜)"
                  example: "2024-01-15"
              required: [text]
      responses:
        '201':
          description: "ëª©í‘œ ìƒì„± ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailyGoal'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ëª©í‘œ ê°œìˆ˜ ì´ˆê³¼, ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                too_many_goals:
                  summary: "ëª©í‘œ ê°œìˆ˜ ì´ˆê³¼"
                  value:
                    code: 400
                    message: "í•˜ë£¨ ìµœëŒ€ 20ê°œì˜ ëª©í‘œë§Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    get:
      tags: ["Goals"]
      summary: "ëª©í‘œ ëª©ë¡ ì¡°íšŒ"
      description: |
        ì‚¬ìš©ìì˜ ëª©í‘œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
        
        - ë‚ ì§œë³„ ëª©í‘œ ì¡°íšŒ
        - ì™„ë£Œ ìƒíƒœë³„ í•„í„°ë§
        - ìš°ì„ ìˆœìœ„ë³„ ì •ë ¬
        - ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í™”
      operationId: "getGoals"
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: date
          schema:
            type: string
            format: date
          description: "íŠ¹ì • ë‚ ì§œì˜ ëª©í‘œ ì¡°íšŒ (ê¸°ë³¸ê°’: ì˜¤ëŠ˜)"
          example: "2024-01-15"
        - in: query
          name: completed
          schema:
            type: boolean
          description: "ì™„ë£Œ ì—¬ë¶€ í•„í„°"
          example: false
        - in: query
          name: priority
          schema:
            type: string
            enum: [low, medium, high]
          description: "ìš°ì„ ìˆœìœ„ í•„í„°"
          example: "high"
        - in: query
          name: category
          schema:
            type: string
          description: "ì¹´í…Œê³ ë¦¬ í•„í„°"
          example: "ê±´ê°•"
        - in: query
          name: sort
          schema:
            type: string
            enum: [priority, created, alphabetical]
            default: priority
          description: "ì •ë ¬ ê¸°ì¤€"
          example: "priority"
      responses:
        '200':
          description: "ëª©í‘œ ëª©ë¡ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  goals:
                    type: array
                    items:
                      $ref: '#/components/schemas/DailyGoal'
                  summary:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: "ì „ì²´ ëª©í‘œ ìˆ˜"
                        example: 5
                      completed:
                        type: integer
                        description: "ì™„ë£Œëœ ëª©í‘œ ìˆ˜"
                        example: 3
                      completionRate:
                        type: number
                        format: float
                        description: "ì™„ë£Œìœ¨ (0-1)"
                        example: 0.6
                      totalEstimatedMinutes:
                        type: integer
                        description: "ì´ ì˜ˆìƒ ì†Œìš” ì‹œê°„"
                        example: 120
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["Goals"]
      summary: "CORS preflight for goals"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "goalsOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, POST, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

  /api/v1/goals/{goalId}:
    put:
      tags: ["Goals"]
      summary: "ëª©í‘œ ìˆ˜ì •"
      description: |
        ê¸°ì¡´ ëª©í‘œë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
        
        - ëª©í‘œ ë‚´ìš© ìˆ˜ì •
        - ì™„ë£Œ ìƒíƒœ ë³€ê²½
        - ìš°ì„ ìˆœìœ„ ë³€ê²½
        - ì™„ë£Œ ì‹œê°„ ìë™ ê¸°ë¡
      operationId: "updateGoal"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: goalId
          required: true
          schema:
            type: string
            pattern: "^goal_[a-zA-Z0-9]+$"
          description: "ëª©í‘œ ê³ ìœ  ID"
          example: "goal_345678901"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                text:
                  type: string
                  minLength: 1
                  maxLength: 200
                  description: "ëª©í‘œ ë‚´ìš©"
                  example: "ì•„ì¹¨ ìš´ë™ 1ì‹œê°„"
                completed:
                  type: boolean
                  description: "ì™„ë£Œ ì—¬ë¶€"
                  example: true
                priority:
                  type: string
                  enum: [low, medium, high]
                  description: "ìš°ì„ ìˆœìœ„"
                  example: "high"
                category:
                  type: string
                  maxLength: 50
                  description: "ì¹´í…Œê³ ë¦¬"
                  example: "ê±´ê°•"
                estimatedMinutes:
                  type: integer
                  minimum: 1
                  maximum: 1440
                  description: "ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ë¶„)"
                  example: 60
              minProperties: 1
      responses:
        '200':
          description: "ëª©í‘œ ìˆ˜ì • ì„±ê³µ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DailyGoal'
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: "ëª©í‘œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags: ["Goals"]
      summary: "ëª©í‘œ ì‚­ì œ"
      description: |
        íŠ¹ì • ëª©í‘œë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
        
        - ì¦‰ì‹œ ì‚­ì œ (ë³µêµ¬ ë¶ˆê°€)
        - ì™„ë£Œëœ ëª©í‘œë„ ì‚­ì œ ê°€ëŠ¥
        - í†µê³„ì—ì„œ ì œì™¸ë¨
      operationId: "deleteGoal"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: goalId
          required: true
          schema:
            type: string
            pattern: "^goal_[a-zA-Z0-9]+$"
          description: "ëª©í‘œ ê³ ìœ  ID"
          example: "goal_345678901"
      responses:
        '204':
          description: "ëª©í‘œ ì‚­ì œ ì„±ê³µ"
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: "ëª©í‘œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429': 
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["Goals"]
      summary: "CORS preflight for goal operations"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "goalOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "PUT, DELETE, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

  # User Profile
  /api/v1/users/profile:
    get:
      tags: ["User Profile"]
      summary: "í”„ë¡œí•„ ì¡°íšŒ"
      description: |
        í˜„ì¬ ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        
        - ê¸°ë³¸ ì •ë³´ (ì´ë¦„, ì´ë©”ì¼, ê°€ì…ì¼ ë“±)
        - ê³„ì • ìƒíƒœ (ì´ë©”ì¼ ì¸ì¦, êµ¬ë… í”Œëœ ë“±)
        - ì‚¬ìš© í†µê³„ (ì´ ê¸°ë¡ ìˆ˜, ì—°ì† ì¼ìˆ˜ ë“±)
      operationId: "getUserProfile"
      security:
        - bearerAuth: []
      responses:
        '200':
          description: "í”„ë¡œí•„ ì¡°íšŒ ì„±ê³µ"
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      stats:
                        type: object
                        description: "ì‚¬ìš©ì í†µê³„"
                        properties:
                          totalEntries:
                            type: integer
                            description: "ì´ ê¸°ë¡ ìˆ˜"
                            example: 45
                          totalGoals:
                            type: integer
                            description: "ì´ ëª©í‘œ ìˆ˜"
                            example: 120
                          currentStreak:
                            type: integer
                            description: "í˜„ì¬ ì—°ì† ê¸°ë¡ ì¼ìˆ˜"
                            example: 7
                          longestStreak:
                            type: integer
                            description: "ìµœì¥ ì—°ì† ê¸°ë¡ ì¼ìˆ˜"
                            example: 21
                          goalCompletionRate:
                            type: number
                            format: float
                            description: "ëª©í‘œ ë‹¬ì„±ë¥  (0-1)"
                            example: 0.78
                          joinDays:
                            type: integer
                            description: "ê°€ì… í›„ ê²½ê³¼ ì¼ìˆ˜"
                            example: 30
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags: ["User Profile"]
      summary: "í”„ë¡œí•„ ìˆ˜ì •"
      description: |
        ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
        
        - ì´ë¦„ ë³€ê²½ ê°€ëŠ¥
        - í”„ë¡œí•„ ì´ë¯¸ì§€ URL ë³€ê²½ ê°€ëŠ¥
        - ì´ë©”ì¼ ë³€ê²½ ì‹œ ì¬ì¸ì¦ í•„ìš”
      operationId: "updateUserProfile"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 50
                  description: "ì‚¬ìš©ì ì´ë¦„"
                  example: "ê¹€ì„±ì¥"
                avatar:
                  type: string
                  format: uri
                  description: "í”„ë¡œí•„ ì´ë¯¸ì§€ URL"
                  example: "https://cdn.voicejournal.com/avatars/user123.jpg"
                email:
                  type: string
                  format: email
                  description: "ì´ë©”ì¼ ì£¼ì†Œ (ë³€ê²½ ì‹œ ì¬ì¸ì¦ í•„ìš”)"
                  example: "newemail@example.com"
              minProperties: 1
      responses:
        '200':
          description: "í”„ë¡œí•„ ìˆ˜ì • ì„±ê³µ"
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/User'
                  - type: object
                    properties:
                      emailVerificationRequired:
                        type: boolean
                        description: "ì´ë©”ì¼ ì¬ì¸ì¦ í•„ìš” ì—¬ë¶€"
                        example: false
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨, ì´ë©”ì¼ ì¤‘ë³µ ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["User Profile"]
      summary: "CORS preflight for profile"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "profileOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "GET, PUT, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

  /api/v1/users/password:
    put:
      tags: ["User Profile"]
      summary: "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"
      description: |
        ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
        
        - í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ í•„ìš”
        - ìƒˆ ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ê²€ì¦
        - ë³€ê²½ í›„ ëª¨ë“  ì„¸ì…˜ ë¬´íš¨í™”
        - ì´ë©”ì¼ ì•Œë¦¼ ë°œì†¡
      operationId: "changePassword"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentPassword:
                  type: string
                  description: "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸"
                  example: "currentPassword123!"
                newPassword:
                  type: string
                  minLength: 8
                  description: "ìƒˆ ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 8ì, ì˜ë¬¸+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì ê¶Œì¥)"
                  example: "newPassword123!"
                confirmPassword:
                  type: string
                  description: "ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸"
                  example: "newPassword123!"
              required: [currentPassword, newPassword, confirmPassword]
      responses:
        '200':
          description: "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."
                  sessionInvalidated:
                    type: boolean
                    description: "ê¸°ì¡´ ì„¸ì…˜ ë¬´íš¨í™” ì—¬ë¶€"
                    example: true
                  emailSent:
                    type: boolean
                    description: "ì•Œë¦¼ ì´ë©”ì¼ ë°œì†¡ ì—¬ë¶€"
                    example: true
        '400':
          description: "ì˜ëª»ëœ ìš”ì²­ (ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜, ê°•ë„ ë¶€ì¡± ë“±)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                password_mismatch:
                  summary: "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë¶ˆì¼ì¹˜"
                  value:
                    code: 400
                    message: "ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
                    timestamp: "2024-01-15T10:30:00Z"
                weak_password:
                  summary: "ì•½í•œ ë¹„ë°€ë²ˆí˜¸"
                  value:
                    code: 400
                    message: "ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤."
                    details: "ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•˜ì—¬ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”."
                    timestamp: "2024-01-15T10:30:00Z"
        '401':
          description: "ì¸ì¦ ì‹¤íŒ¨ (í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: "ìš”ì²­ í•œë„ ì´ˆê³¼ (ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹œë„ ì œí•œ)"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    options:
      tags: ["User Profile"]
      summary: "CORS preflight for password change"
      description: "CORS preflight ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤."
      operationId: "passwordOptions"
      responses:
        '204':
          description: "CORS preflight ì„±ê³µ"
          headers:
            Access-Control-Allow-Origin:
              schema:
                type: string
                example: "*"
            Access-Control-Allow-Methods:
              schema:
                type: string
                example: "PUT, OPTIONS"
            Access-Control-Allow-Headers:
              schema:
                type: string
                example: "Content-Type, Authorization"

tags:
  - name: "Authentication"
    description: |
      ì‚¬ìš©ì ì¸ì¦ ê´€ë ¨ API
      
      - íšŒì›ê°€ì…, ë¡œê·¸ì¸, í† í° ê°±ì‹ 
      - JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ
      - ì´ë©”ì¼ ì¸ì¦ ë° ë³´ì•ˆ ê¸°ëŠ¥
  - name: "File Upload"
    description: |
      íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ API
      
      - S3 Pre-signed URL ë°œê¸‰
      - ìŒì„± íŒŒì¼ ì—…ë¡œë“œ ì§€ì›
      - íŒŒì¼ í˜•ì‹ ë° í¬ê¸° ì œí•œ
  - name: "Voice Processing"
    description: |
      ìŒì„± ì²˜ë¦¬ ê´€ë ¨ API
      
      - OpenAI Whisper ìŒì„±-í…ìŠ¤íŠ¸ ë³€í™˜
      - ë‹¤êµ­ì–´ ì§€ì› (í•œêµ­ì–´ ìµœì í™”)
      - ì„¸ê·¸ë¨¼íŠ¸ë³„ íƒ€ì„ìŠ¤íƒ¬í”„ ì œê³µ
  - name: "Voice Entries"
    description: |
      ìŒì„± ê¸°ë¡ ê´€ë¦¬ API
      
      - ê³„íš(plan) ë° íšŒê³ (reflection) ê¸°ë¡
      - CRUD ì‘ì—… ë° ê²€ìƒ‰ ê¸°ëŠ¥
      - AI ë¶„ì„ ê²°ê³¼ í¬í•¨
  - name: "Goals"
    description: |
      ëª©í‘œ ê´€ë¦¬ API
      
      - ì¼ì¼ ëª©í‘œ ì„¤ì • ë° ì¶”ì 
      - ìš°ì„ ìˆœìœ„ ë° ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
      - ì™„ë£Œìœ¨ í†µê³„ ì œê³µ
  - name: "User Profile"
    description: |
      ì‚¬ìš©ì í”„ë¡œí•„ ê´€ë¦¬ API
      
      - ê°œì¸ì •ë³´ ìˆ˜ì •
      - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
      - ì‚¬ìš© í†µê³„ ì¡°íšŒ
